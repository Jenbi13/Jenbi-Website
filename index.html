<!DOCTYPE html>
<html lang="de" data-theme="auto">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jenbi</title>
  <meta name="description" content="Jenbi – Mini-Games, Links & ein bisserl Über mich." />
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>🎮</text></svg>">
  <style>
    :root{
      --bg:#f6f7fb; --surface:#ffffff; --text:#0f172a; --muted:#475569;
      --primary:#2a6cf4; --primary-contrast:#ffffff;
      --ring:0 0 0 3px rgba(42,108,244,.35);
      --radius:14px; --shadow:0 10px 30px rgba(2,8,23,.08);
    }
    @media (prefers-color-scheme: dark){
      :root{ --bg:#0b1220; --surface:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
             --primary:#60a5fa; --primary-contrast:#0b1220; --shadow:0 12px 40px rgba(0,0,0,.45); }
    }
    html[data-theme="light"]{
      --bg:#f6f7fb; --surface:#ffffff; --text:#0f172a; --muted:#475569;
      --primary:#2a6cf4; --primary-contrast:#ffffff; --shadow:0 10px 30px rgba(2,8,23,.08);
    }
    html[data-theme="dark"]{
      --bg:#0b1220; --surface:#0f172a; --text:#e5e7eb; --muted:#94a3b8;
      --primary:#60a5fa; --primary-contrast:#0b1220; --shadow:0 12px 40px rgba(0,0,0,.45);
    }

    *{box-sizing:border-box}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      margin:0; color:var(--text); line-height:1.6;
      background:
        radial-gradient(1200px 600px at 80% -10%, rgba(42,108,244,.12), transparent 60%),
        radial-gradient(1000px 600px at -10% 10%, rgba(99,102,241,.10), transparent 55%),
        var(--bg);
    }

    .wrap{max-width:960px;margin:28px auto;padding:0 16px 56px}
    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px}
    .brand{display:flex;align-items:center;gap:12px}
    .brand img{width:56px;height:56px;border-radius:50%;object-fit:cover;box-shadow:0 6px 18px rgba(0,0,0,.15)}
    .title{font-size:1.6rem;font-weight:800}
    .muted{color:var(--muted);font-size:.95rem}
    .version{color:var(--muted);font-size:.9rem;margin-left:10px}

    .btn{
      appearance:none;border:0;cursor:pointer;font-weight:700;
      background:var(--primary);color:var(--primary-contrast);
      padding:10px 14px;border-radius:10px;box-shadow:0 6px 16px rgba(42,108,244,.35);
      transition:transform .15s ease, filter .2s ease;
    }
    .btn:hover{transform:translateY(-1px);filter:brightness(1.05)}
    .btn-ghost{background:transparent;border:1px solid rgba(148,163,184,.35);color:var(--text)}
    .link{color:var(--primary);font-weight:700;text-decoration:none}

    .card{background:var(--surface);border-radius:var(--radius);box-shadow:var(--shadow);overflow:clip;border:1px solid rgba(148,163,184,.15)}

    .tabs{display:grid;grid-template-rows:auto 1fr;min-height:420px}
    .tablist{display:flex;gap:8px;background:linear-gradient(180deg, rgba(42,108,244,.12), transparent);padding:14px;border-bottom:1px solid rgba(148,163,184,.20)}
    .tab{appearance:none;border:0;cursor:pointer;background:var(--surface);color:var(--text);padding:10px 14px;border-radius:10px;font-weight:600;box-shadow:0 2px 8px rgba(2,8,23,.05);transition:transform .15s ease, background .2s ease}
    .tab[aria-selected="true"]{background:var(--primary);color:var(--primary-contrast)}
    .tabpanel{display:none;padding:22px}
    .tabpanel[aria-hidden="false"]{display:block}

    details.game{border:1px solid rgba(148,163,184,.25);border-radius:12px;padding:12px 14px;margin:14px 0;background:var(--surface);box-shadow:var(--shadow)}
    details.game>summary{list-style:none;cursor:pointer;font-weight:800}
    details.game[open]{border-color:rgba(42,108,244,.35)}

    iframe{border:0;width:100%;max-width:100%;aspect-ratio:16/9;border-radius:12px}
    footer{margin-top:24px;color:var(--muted);font-size:.9rem;text-align:center}

    /* Reaction Timer */
    .rt-pad{margin-top:10px;padding:26px;border-radius:12px;user-select:none;cursor:pointer;text-align:center}
    .rt-wait{background:#f1f5f9;color:#475569}
    .rt-ready{background:#ef4444;color:#fff}
    .rt-go{background:#22c55e;color:#0b1220}

    /* Snake */
    .snake-stage{position:relative;width:400px;height:400px}
    #snakeCanvas{background:#0b1220;border:1px solid rgba(148,163,184,.4);border-radius:8px;width:400px;height:400px;image-rendering:pixelated;transition:filter .15s ease}
    .snake-overlay{position:absolute;inset:0;display:grid;place-items:center;background:rgba(15,23,42,.45);color:#fff;font-weight:900;font-size:1.1rem;border-radius:8px;text-align:center;backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .15s ease}
    .snake-overlay.show{opacity:1;pointer-events:auto}

    /* Joel Easter Egg image */
    #joel-img{display:none;max-width:200px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.4);margin-top:10px;opacity:0;transition:opacity .3s}
    #joel-img.show{display:block;opacity:1}

    /* Settings Popover */
    .settings{position:relative;display:inline-block}
    .settings-panel{
      position:absolute; right:0; margin-top:8px; z-index:10; min-width:240px;
      background:var(--surface); border:1px solid rgba(148,163,184,.25); border-radius:12px; box-shadow:var(--shadow);
      padding:12px; display:none;
    }
    .settings-panel.show{display:block}
    .settings-row{display:flex;align-items:center;justify-content:space-between;gap:10px;margin:8px 0}
    .select{width:140px;padding:8px;border-radius:10px;border:1px solid rgba(148,163,184,.35);background:transparent;color:var(--text)}
    /* -- hübscher Gear-Button -- */
.btn-ghost{
  background: transparent;
  border: none;
  color: var(--text);
  box-shadow: none;
}

#settingsBtn{
  font-size: 22px;          /* größer */
  padding: 6px 8px;
  line-height: 1;
  background: transparent;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}
#settingsBtn:hover{
  background: rgba(148,163,184,.15);  /* dezenter Hover */
}
#settingsBtn:focus-visible{
  outline: none;
  box-shadow: var(--ring);
}

  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <img alt="Jenbi Avatar" src="https://yt3.googleusercontent.com/5j4zseBO0OrjSe51wzVmqQ8jfrpsTFhk_GSuij_Ng9vusIpFr6l7Vi9S_8Klo-yCVRyEOCBKDg=s256-c-k-c0x00ffffff-no-rj" />
        <div>
          <div class="title" data-i18n="title">Jenbi</div>
          <div class="muted" data-i18n="subtitle">Roblox • Minecraft • Nintendo • aus NÖ 🦌</div>
        </div>
      </div>
      <div style="display:flex;align-items:center;gap:8px">
        <div class="settings">
          <button id="settingsBtn" class="btn-ghost" aria-label="Einstellungen" title="Einstellungen">⚙️</button>
          <div id="settingsPanel" class="settings-panel" role="dialog" aria-label="Einstellungen">
            <div style="font-weight:800;margin-bottom:6px" data-i18n="settings">Einstellungen</div>
            <div class="settings-row">
              <label for="langSelect" data-i18n="language">Sprache</label>
              <select id="langSelect" class="select">
                <option value="de">Deutsch</option>
                <option value="en">English</option>
              </select>
            </div>
            <div class="settings-row">
              <label for="themeSelect" data-i18n="theme">Theme</label>
              <select id="themeSelect" class="select">
                <option value="auto" data-i18n="auto">Auto (System)</option>
                <option value="light" data-i18n="light">Hell</option>
                <option value="dark" data-i18n="dark">Dunkel</option>
              </select>
            </div>
            <button id="closeSettings" class="btn" style="width:100%" data-i18n="close">Schließen</button>
          </div>
        </div>
        <span class="version">v3.0.0_pre8</span>
      </div>
    </header>

    <section class="card tabs" id="tabs">
      <div role="tablist" class="tablist">
        <button class="tab" role="tab" id="tab-ueber" aria-controls="ueber" aria-selected="true" data-i18n="tab_ueber">🧍 Über</button>
        <button class="tab" role="tab" id="tab-games" aria-controls="games" aria-selected="false" data-i18n="tab_games">🎮 Games</button>
        <button class="tab" role="tab" id="tab-links" aria-controls="links" aria-selected="false" data-i18n="tab_links">🔗 Links</button>
      </div>

      <!-- ÜBER -->
      <div id="ueber" class="tabpanel" aria-hidden="false">
        <h2 data-i18n="about_h">Über mich</h2>
        <p data-i18n="about_p1">Servas! Ich bin <strong>Jenbi</strong> – willkommen auf meiner kleinen, aber feinen Seite. Hier find’sd Mini-Games, Links und a bissl was über mich. 😎</p>
        <p data-i18n="about_p2">Ich komm’ aus dem schönen <strong>Niederösterreich</strong> und mach Videos zu <em>Roblox</em>, <em>Minecraft</em> und <em>Nintendo</em>.</p>
        <p>
          <span data-i18n="homies">Homies:</span>
          <strong>Fabian</strong> (IRL),
          <strong id="joel">Joel</strong> (Brawl Stars-Discord),
          <strong>zLequit</strong> (<span data-i18n="since_years">kenn ich seit ein paar Jahren</span> – ca. 2021/2022; <em data-i18n="subscribe_sweet">abonnieren auf süß!</em>)
        </p>
        <!-- Joel Easter Egg Bild -->
        <img id="joel-img" src="Joel_Bild.png" alt="Joel">
      </div>

      <!-- GAMES -->
      <div id="games" class="tabpanel" aria-hidden="true">
        <h2 data-i18n="games_h">Mini-Games</h2>

        <details class="game" id="dd-ssp">
          <summary data-i18n="ssp_title">✂️🪨📄 Schere-Stein-Papier</summary>
          <article class="game-area">
            <div class="choices">
              <button class="btn" data-choice="Schere" data-i18n="scissors">✌️ Schere</button>
              <button class="btn" data-choice="Stein" data-i18n="rock">🪨 Stein</button>
              <button class="btn" data-choice="Papier" data-i18n="paper">📄 Papier</button>
              <button class="btn" id="resetScore" title="Score zurücksetzen" data-i18n="reset">🔁 Reset</button>
            </div>
            <p id="ssp-result" class="score">—</p>
            <p class="muted" id="ssp-score" aria-live="polite">Score: 0 🏆 | Wins: 0 | Losses: 0 | Draws: 0</p>
          </article>
        </details>

        <details class="game" id="dd-rt">
          <summary data-i18n="rt_title">⚡ Reaction Timer</summary>
          <div id="rt-pad" class="rt-pad rt-wait" data-i18n="rt_start">Klick zum Starten …</div>
          <p class="muted"><span data-i18n="rt_last">Letzte Zeit</span>: <span id="rt-last">–</span> ms | <span data-i18n="rt_best">Best</span>: <span id="rt-best">–</span> ms</p>
          <button id="rt-reset" class="btn" title="Bestzeit löschen" data-i18n="reset_best">🗑️ Reset Best</button>
        </details>

        <details class="game" id="dd-snake">
          <summary data-i18n="snake_title">🐍 Snake</summary>
          <div class="snake-stage">
            <canvas id="snakeCanvas" width="400" height="400" aria-label="Snake Spielfeld"></canvas>
            <div id="snakeOverlay" class="snake-overlay show" data-i18n="snake_click_start">Klicke zum Starten</div>
          </div>
          <div class="row" style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px">
            <button id="snake-start" class="btn" data-i18n="start">▶️ Start</button>
            <button id="snake-pause" class="btn" disabled data-i18n="pause">⏸️ Pause</button>
            <button id="snake-reset" class="btn" data-i18n="reset">🔁 Reset</button>
            <div class="stat">Score: <span id="snake-score">0</span></div>
            <div class="stat">Best: <span id="snake-best">0</span></div>
          </div>
          <p class="muted" data-i18n="snake_controls">Steuerung: Pfeiltasten oder WASD • P = Pause/Weiter • R = Reset</p>
        </details>

        <details class="game" id="dd-quiz">
          <summary data-i18n="quiz_title">🧠 Trivia Quiz</summary>
          <div id="quiz-box"></div>
          <div class="row" style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px">
            <button id="quiz-start" class="btn" data-i18n="quiz_start">📝 Quiz starten</button>
            <div class="stat" data-i18n="points">Punkte</div>: <span id="quiz-score">0</span>
            <div class="stat" data-i18n="best">Best</div>: <span id="quiz-best">0</span>
            <button id="quiz-reset" class="btn" title="Best löschen" data-i18n="reset_best">🗑️ Reset Best</button>
          </div>
        </details>
      </div>

      <!-- LINKS -->
      <div id="links" class="tabpanel" aria-hidden="true">
        <h2 data-i18n="links_h">Links</h2>
        <p data-i18n="yt_channel">Mein YouTube-Kanal:</p>
        <p><a class="link" href="https://www.youtube.com/@jenbi13" target="_blank" rel="noopener noreferrer" data-i18n="yt_link">➡️ Jenbi auf YouTube</a></p>
        <p data-i18n="top_video">Beliebtestes Video:</p>
        <iframe title="Beliebtestes Video von Jenbi"
          src="https://www.youtube.com/embed/lDBJk9_NfrY?si=6cJZscBPXnm-Akve"
          loading="lazy" allow="accelerometer; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen>
        </iframe>
      </div>
    </section>

    <footer>
      <p>© <span id="year"></span> Jenbi • <span data-i18n="made_with_love">Gemacht mit</span> ❤️</p>
    </footer>
  </div>

  <script>
    const $=(s,r=document)=>r.querySelector(s), $$=(s,r=document)=>Array.from(r.querySelectorAll(s));

    /* ===== i18n ===== */
    const I18N = {
      de: {
        title:"Jenbi",
        subtitle:"Roblox • Minecraft • Nintendo • aus NÖ 🦌",
        settings:"Einstellungen", language:"Sprache", theme:"Theme", auto:"Auto (System)", light:"Hell", dark:"Dunkel", close:"Schließen",
        tab_ueber:"🧍 Über", tab_games:"🎮 Games", tab_links:"🔗 Links",
        about_h:"Über mich",
        about_p1:"Servas! Ich bin <strong>Jenbi</strong> – willkommen auf meiner kleinen, aber feinen Seite. Hier find’sd Mini-Games, Links und a bissl was über mich. 😎",
        about_p2:"Ich komm’ aus dem schönen <strong>Niederösterreich</strong> und mach Videos zu <em>Roblox</em>, <em>Minecraft</em> und <em>Nintendo</em>.",
        homies:"Homies:", since_years:"kenn ich seit ein paar Jahren", subscribe_sweet:"abonnieren auf süß!",
        games_h:"Mini-Games",
        ssp_title:"✂️🪨📄 Schere-Stein-Papier", scissors:"✌️ Schere", rock:"🪨 Stein", paper:"📄 Papier", reset:"🔁 Reset",
        rt_title:"⚡ Reaction Timer", rt_start:"Klick zum Starten …", rt_last:"Letzte Zeit", rt_best:"Best", reset_best:"🗑️ Reset Best",
        snake_title:"🐍 Snake", snake_click_start:"Klicke zum Starten", start:"▶️ Start", pause:"⏸️ Pause", snake_controls:"Steuerung: Pfeiltasten oder WASD • P = Pause/Weiter • R = Reset",
        quiz_title:"🧠 Trivia Quiz", quiz_start:"📝 Quiz starten", points:"Punkte", best:"Best",
        links_h:"Links", yt_channel:"Mein YouTube-Kanal:", yt_link:"➡️ Jenbi auf YouTube", top_video:"Beliebtestes Video:",
        made_with_love:"Gemacht mit"
      },
      en: {
        title:"Jenbi",
        subtitle:"Roblox • Minecraft • Nintendo • from Lower Austria 🦌",
        settings:"Settings", language:"Language", theme:"Theme", auto:"Auto (System)", light:"Light", dark:"Dark", close:"Close",
        tab_ueber:"🧍 About", tab_games:"🎮 Games", tab_links:"🔗 Links",
        about_h:"About me",
        about_p1:"Hey! I'm <strong>Jenbi</strong> — welcome to my tiny but mighty website. You’ll find mini-games, links and a bit about me. 😎",
        about_p2:"I’m from beautiful <strong>Lower Austria</strong> and make videos about <em>Roblox</em>, <em>Minecraft</em> and <em>Nintendo</em>.",
        homies:"Homies:", since_years:"known for a few years", subscribe_sweet:"drop a sweet sub!",
        games_h:"Mini-Games",
        ssp_title:"✂️🪨📄 Rock-Paper-Scissors", scissors:"✌️ Scissors", rock:"🪨 Rock", paper:"📄 Paper", reset:"🔁 Reset",
        rt_title:"⚡ Reaction Timer", rt_start:"Click to start …", rt_last:"Last", rt_best:"Best", reset_best:"🗑️ Reset Best",
        snake_title:"🐍 Snake", snake_click_start:"Click to start", start:"▶️ Start", pause:"⏸️ Pause", snake_controls:"Controls: Arrows or WASD • P = Pause/Resume • R = Reset",
        quiz_title:"🧠 Trivia Quiz", quiz_start:"📝 Start quiz", points:"Points", best:"Best",
        links_h:"Links", yt_channel:"My YouTube channel:", yt_link:"➡️ Jenbi on YouTube", top_video:"Most popular video:",
        made_with_love:"Made with"
      }
    };
    const LANG_KEY = 'jenbi.lang';
    function applyI18n(lang){
      const dict = I18N[lang] || I18N.de;
      $$('[data-i18n]').forEach(el=>{
        const key = el.getAttribute('data-i18n');
        if (!dict[key]) return;
        if (el.tagName === 'INPUT' || el.tagName === 'TEXTAREA') el.placeholder = dict[key];
        else el.innerHTML = dict[key];
      });
      document.documentElement.lang = lang;
    }

    /* ===== Settings (gear) ===== */
    const settingsBtn = $('#settingsBtn');
    const settingsPanel = $('#settingsPanel');
    const closeSettings = $('#closeSettings');
    const langSelect = $('#langSelect');
    const themeSelect = $('#themeSelect');
    const THEME_KEY = 'jenbi.theme';

    function openSettings(){ settingsPanel.classList.add('show'); }
    function closeSettingsPanel(){ settingsPanel.classList.remove('show'); }

    settingsBtn.addEventListener('click', (e)=>{ e.stopPropagation(); openSettings(); });
    closeSettings.addEventListener('click', closeSettingsPanel);
    document.addEventListener('click', (e)=>{ if(!settingsPanel.contains(e.target) && e.target !== settingsBtn){ closeSettingsPanel(); } });

    // Init saved prefs
    const savedLang = localStorage.getItem(LANG_KEY) || 'de';
    const savedTheme = localStorage.getItem(THEME_KEY) || 'auto';
    langSelect.value = savedLang; themeSelect.value = savedTheme;
    applyI18n(savedLang);
    document.documentElement.setAttribute('data-theme', savedTheme);

    langSelect.addEventListener('change', ()=>{
      localStorage.setItem(LANG_KEY, langSelect.value);
      applyI18n(langSelect.value);
    });
    themeSelect.addEventListener('change', ()=>{
      localStorage.setItem(THEME_KEY, themeSelect.value);
      document.documentElement.setAttribute('data-theme', themeSelect.value);
    });

    /* ===== Tabs ===== */
    const tabs = $$('.tab');
    function activateTab(index, pushHash = true) {
      tabs.forEach((t, i) => {
        const sel = i === index;
        t.setAttribute('aria-selected', String(sel));
        $('#'+t.getAttribute('aria-controls'))?.setAttribute('aria-hidden', String(!sel));
      });
      if (pushHash && tabs[index]) {
        const id = tabs[index].id.replace('tab-', '');
        history.replaceState(null, '', '#' + id);
      }
      tabs[index]?.focus({ preventScroll:true });
    }
    tabs.forEach((tab, i) => {
      tab.addEventListener('click', () => activateTab(i));
      tab.addEventListener('keydown', (e) => {
        const k = e.key;
        if (k==='ArrowRight' || k==='ArrowLeft'){ e.preventDefault(); const d=k==='ArrowRight'?1:-1; activateTab((i+d+tabs.length)%tabs.length); }
        if (k==='Home'){ e.preventDefault(); activateTab(0); }
        if (k==='End'){ e.preventDefault(); activateTab(tabs.length-1); }
      });
    });
    (function initFromHash(){
      const hash = location.hash.replace('#','');
      const idx = tabs.findIndex(t => t.id === 'tab-' + hash);
      activateTab(idx >= 0 ? idx : 0, false);
    })();

    /* ===== SSP ===== */
    const sspKey = 'jenbi.ssp.score';
    const sspResult = $('#ssp-result');
    const sspScoreEl = $('#ssp-score');
    let score = { total: 0, win: 0, lose: 0, draw: 0 };
    try { const saved = JSON.parse(localStorage.getItem(sspKey)); if (saved && typeof saved === 'object') score = saved; } catch {}
    const choices = ['Schere','Stein','Papier'];
    const beats = { Schere: 'Papier', Stein: 'Schere', Papier: 'Stein' };
    function updateScoreline() {
      sspScoreEl.textContent = `Score: ${score.total} 🏆 | Wins: ${score.win} | Losses: ${score.lose} | Draws: ${score.draw}`;
      localStorage.setItem(sspKey, JSON.stringify(score));
    }
    updateScoreline();
    function playSSP(choice) {
      const bot = choices[Math.floor(Math.random()*3)];
      let msg;
      if (choice === bot) { score.draw++; score.total++; msg = `${choice} vs ${bot} … Unentschieden!`; }
      else if (beats[choice] === bot) { score.win++; score.total++; msg = `${choice} vs ${bot} … DU HAST GEWONNEN!`; }
      else { score.lose++; score.total++; msg = `${choice} vs ${bot} … Du hast verloren!`; }
      sspResult.textContent = msg; updateScoreline();
    }
    $$('#dd-ssp [data-choice]').forEach(btn => btn.addEventListener('click', () => playSSP(btn.dataset.choice)));
    $('#resetScore')?.addEventListener('click', () => { score = { total: 0, win: 0, lose: 0, draw: 0 }; updateScoreline(); sspResult.textContent = '—'; });

    /* ===== Reaction Timer ===== */
    const rtPad = $('#rt-pad'), rtLast = $('#rt-last'), rtBest = $('#rt-best'), rtReset = $('#rt-reset');
    const rtKey = 'jenbi.rt.best';
    let rtTimeout = null, rtStartTime = 0, rtState = 'idle'; // idle | ready | go
    const savedRT = Number(localStorage.getItem(rtKey)); if (!Number.isNaN(savedRT) && savedRT>0) rtBest.textContent = savedRT;
    function setPad(state, text){ rtPad.className = `rt-pad ${state}`; rtPad.textContent = text; }
    function armReaction(){
      rtState = 'ready'; setPad('rt-ready', I18N[document.documentElement.lang||'de'].rt_start || 'Warte …');
      const delay = 700 + Math.random()*2300;
      rtTimeout = setTimeout(()=>{ rtState = 'go'; rtStartTime = performance.now(); setPad('rt-go','JETZT!'); }, delay);
    }
    rtPad?.addEventListener('click', () => {
      if (rtState === 'idle') {
        armReaction();
      } else if (rtState === 'ready') {
        clearTimeout(rtTimeout); rtState = 'idle'; setPad('rt-wait','Zu früh! Klick zum Neustart …');
      } else if (rtState === 'go') {
        const t = Math.round(performance.now() - rtStartTime);
        rtLast.textContent = t;
        setPad('rt-wait','Klick zum Starten …'); rtState = 'idle';
        const best = Number(rtBest.textContent) || Infinity;
        if (t < best) { rtBest.textContent = t; localStorage.setItem(rtKey, String(t)); }
      }
    });
    rtReset?.addEventListener('click', () => { localStorage.removeItem(rtKey); rtBest.textContent = '–'; });

    /* ===== Snake ===== */
    (() => {
      const cvs = $('#snakeCanvas'); if (!cvs) return;
      const ctx = cvs.getContext('2d');
      const overlay = $('#snakeOverlay');
      const btnStart = $('#snake-start');
      const btnPause = $('#snake-pause');
      const btnReset = $('#snake-reset');
      const scoreEl = $('#snake-score');
      const bestEl  = $('#snake-best');

      const CELL = 16;
      const COLS = Math.floor(cvs.width / CELL);
      const ROWS = Math.floor(cvs.height / CELL);
      const TICK_MS = 110;

      const bestKey = 'jenbi.snake.best';
      let best = Number(localStorage.getItem(bestKey)) || 0; bestEl.textContent = best;

      let snake, dir, nextDir, food, score;
      let running = false, paused = true, dead = false;
      let acc = 0, lastTs;

      function rndCell(){ return { x: Math.floor(Math.random()*COLS), y: Math.floor(Math.random()*ROWS) }; }
      function spawnFood(){
        let f; do { f = rndCell(); } while (snake.some(s => s.x===f.x && s.y===f.y));
        food = f;
      }
      function setOverlay(text, show){ overlay.textContent = text; overlay.classList.toggle('show', !!show); }
      function reset(){
        snake = [{x: Math.floor(COLS/2), y: Math.floor(ROWS/2)}];
        dir = {x:1,y:0}; nextDir = dir; score = 0; scoreEl.textContent = '0';
        acc = 0; lastTs = undefined; spawnFood();
        running = false; paused = true; dead = false;
        btnPause.disabled = true; btnPause.textContent = I18N[document.documentElement.lang||'de'].pause || '⏸️ Pause';
        setOverlay(I18N[document.documentElement.lang||'de'].snake_click_start || 'Klicke zum Starten', true);
        draw();
      }
      function start(){ running = true; paused = false; dead = false; btnPause.disabled = false; setOverlay('', false); lastTs = undefined; requestAnimationFrame(loop); }
      function togglePause(){
        if (!running || dead) return;
        paused = !paused;
        if (paused) { setOverlay('Pause', true); btnPause.textContent = '▶️ Weiter'; }
        else { setOverlay('', false); btnPause.textContent = '⏸️ Pause'; lastTs = undefined; requestAnimationFrame(loop); }
      }
      function gameOver(){
        running = false; dead = true; paused = false;
        setOverlay('Game Over – Klicke zum Starten', true);
        btnPause.disabled = true; btnPause.textContent = '⏸️ Pause';
        cvs.animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:250});
      }
      function draw(){
        ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--surface')?.trim() || '#0f172a';
        ctx.fillRect(0,0,cvs.width,cvs.height);
        ctx.globalAlpha = 0.08; ctx.fillStyle = '#000';
        for (let x=0;x<COLS;x++) ctx.fillRect(x*CELL,0,1,cvs.height);
        for (let y=0;y<ROWS;y++) ctx.fillRect(0,y*CELL,cvs.width,1);
        ctx.globalAlpha = 1;
        ctx.fillStyle = '#ef4444'; ctx.fillRect(food.x*CELL, food.y*CELL, CELL, CELL);
        ctx.fillStyle = '#22c55e'; snake.forEach(s => ctx.fillRect(s.x*CELL, s.y*CELL, CELL, CELL));
      }
      function step(){
        dir = nextDir;
        const head = { x: snake[0].x + dir.x, y: snake[0].y + dir.y };
        if (head.x<0 || head.x>=COLS || head.y<0 || head.y>=ROWS) return gameOver();
        if (snake.some(s => s.x===head.x && s.y===head.y)) return gameOver();
        snake.unshift(head);
        if (head.x===food.x && head.y===food.y){
          score++; scoreEl.textContent = String(score);
          if (score>best){ best=score; bestEl.textContent=best; localStorage.setItem(bestKey, String(best)); }
          spawnFood();
        } else { snake.pop(); }
      }
      function loop(ts){
        if (!running || paused || dead) return;
        if (lastTs===undefined) lastTs = ts;
        const delta = ts - lastTs; lastTs = ts; acc += delta;
        while (acc >= TICK_MS){ step(); acc -= TICK_MS; }
        draw(); requestAnimationFrame(loop);
      }
      function setDir(nx, ny){
        const opposite = (dir.x === -nx && dir.y === -ny);
        if (opposite) return;
        if (nextDir !== dir) return;
        nextDir = {x:nx, y:ny};
      }

      window.addEventListener('keydown', (e) => {
        const k = e.key.toLowerCase();
        if (['arrowup','arrowdown','arrowleft','arrowright',' '].includes(k)) e.preventDefault?.();
        if (k==='w' || k==='arrowup') setDir(0,-1);
        else if (k==='s' || k==='arrowdown') setDir(0, 1);
        else if (k==='a' || k==='arrowleft') setDir(-1,0);
        else if (k==='d' || k==='arrowright') setDir(1, 0);
        else if (k==='p') togglePause();
        else if (k==='r') reset();
      });

      $('#snake-start')?.addEventListener('click', () => { if (dead) reset(); start(); });
      $('#snake-pause')?.addEventListener('click', togglePause);
      $('#snake-reset')?.addEventListener('click', reset);
      $('#snakeOverlay')?.addEventListener('click', () => {
        if (dead) { reset(); start(); }
        else if (!running) { start(); }
        else if (paused) { togglePause(); }
      });

      reset();
    })();

    /* ===== Trivia ===== */
    const quizBox = $('#quiz-box'), quizStart = $('#quiz-start'), quizScoreEl = $('#quiz-score'), quizBestEl = $('#quiz-best');
    const quizKey = 'jenbi.quiz.best'; let quizScore=0, quizIdx=0, QUIZ=[];
    const QUESTIONS = [
      { q: 'In welchem Jahr fiel die Berliner Mauer?', a: ['1987','1989','1991','1993'], correct: 1 },
      { q: 'Wer gilt als Erfinder des Buchdrucks in Europa?', a: ['Leonardo da Vinci','Johannes Gutenberg','Isaac Newton','Martin Luther'], correct: 1 },
      { q: 'Wann war der Zweite Weltkrieg?', a: ['1914–1918','1939–1945','1950–1953','1961–1975'], correct: 1 },
      { q: 'Amtssprache des Römischen Reiches?', a: ['Griechisch','Latein','Aramäisch','Gotisch'], correct: 1 },
      { q: 'Erster Mensch auf dem Mond (1969)?', a: ['Buzz Aldrin','Yuri Gagarin','Neil Armstrong','Michael Collins'], correct: 2 },
      { q: 'Minecraft 1.0 (Java) – Releasejahr?', a: ['2009','2010','2011','2012'], correct: 2 },
      { q: 'Was droppen Creeper?', a: ['Knochen','Schwarzpulver','Fäden','Schleimball'], correct: 1 },
      { q: 'Min. Obsidian für ein Netherportal?', a: ['8','10','12','14'], correct: 1 },
      { q: 'Berufsstation vom Geistlichen (Cleric)?', a: ['Schmiedetisch','Braustand','Webstuhl','Komposter'], correct: 1 },
      { q: 'Max Stack von Enderperlen?', a: ['16','32','64','8'], correct: 0 },
      { q: 'Hauptstadt von Australien?', a: ['Sydney','Melbourne','Canberra','Perth'], correct: 2 },
      { q: 'Größtes Land (Fläche)?', a: ['Kanada','Russland','China','USA'], correct: 1 },
      { q: 'Kleinstes Land der Welt?', a: ['Monaco','San Marino','Vatikanstadt','Liechtenstein'], correct: 2 },
      { q: 'Kontinent mit den meisten Staaten?', a: ['Europa','Afrika','Asien','Südamerika'], correct: 1 },
      { q: 'Hauptstadt von Kanada?', a: ['Toronto','Vancouver','Ottawa','Montreal'], correct: 2 },
      { q: 'Super Mario Odyssey – Releasejahr?', a: ['2015','2016','2017','2018'], correct: 2 },
      { q: 'Begleiter-Hut in Odyssey?', a: ['Toad','Cappy','Luma','Pauline'], correct: 1 },
      { q: 'Sammelobjekte in Odyssey?', a: ['Power-Sterne','Power-Monde','Shines','Wundersaaten'], correct: 1 },
      { q: 'T-Rex zuerst in welchem Kingdom?', a: ['Wooded','Sand','Cascade','Metro'], correct: 2 },
      { q: 'Zusatzwährung pro Königreich?', a: ['Lila Münzen','Rote Sterne','Blaue Rubine','Silberne Ringe'], correct: 0 },
    ];
    const savedQuizBest = Number(localStorage.getItem(quizKey)||0); quizBestEl.textContent = savedQuizBest;

    function pickRandom(arr, n){ const copy = arr.slice(); for (let i = copy.length - 1; i > 0; i--) { const j = Math.floor(Math.random()*(i+1)); [copy[i], copy[j]] = [copy[j], copy[i]]; } return copy.slice(0,n); }
    function renderQuestion(){
      if (quizIdx >= QUIZ.length) return finishQuiz();
      const {q, a, correct} = QUIZ[quizIdx];
      quizBox.innerHTML = '';
      const h = document.createElement('p'); h.textContent = q; quizBox.appendChild(h);
      a.forEach((txt, i)=>{
        const b = document.createElement('button'); b.className='btn'; b.style.marginRight='8px'; b.textContent = txt;
        b.addEventListener('click', ()=>{
          if (i===correct) { quizScore++; quizScoreEl.textContent = String(quizScore); }
          quizIdx++; renderQuestion();
        });
        quizBox.appendChild(b);
      });
    }
    function finishQuiz(){
      quizBox.innerHTML = `Fertig. Punkte: ${quizScore}/${QUIZ.length}`;
      if (quizScore > savedQuizBest) { localStorage.setItem(quizKey, String(quizScore)); quizBestEl.textContent = String(quizScore); }
    }
    $('#quiz-start')?.addEventListener('click', ()=>{ QUIZ = pickRandom(QUESTIONS, 5); quizScore=0; quizIdx=0; quizScoreEl.textContent='0'; renderQuestion(); });
    $('#quiz-reset')?.addEventListener('click', ()=>{ localStorage.removeItem(quizKey); quizBestEl.textContent='0'; });

    /* ===== Konami ===== */
    (()=>{
      const KONAMI = ['ArrowUp','ArrowUp','ArrowDown','ArrowDown','ArrowLeft','ArrowRight','ArrowLeft','ArrowRight','b','a'];
      let buffer = [];
      window.addEventListener('keydown', (e)=>{
        const key = e.key.length===1 ? e.key.toLowerCase() : e.key;
        buffer.push(key);
        if (buffer.length > KONAMI.length) buffer.shift();
        const match = KONAMI.every((k, i) => buffer[i] === k);
        if (match) { buffer = []; window.open('https://www.youtube.com/watch?v=dQw4w9WgXcQ', '_blank'); alert('Never gonna give you up 🎶'); }
      });
    })();

    /* ===== Joel Easter Egg (10x klicken) ===== */
    (()=>{
      const joel = $('#joel');
      const joelImg = $('#joel-img');
      let clicks = 0;
      joel?.addEventListener('click', () => {
        clicks++;
        if (clicks >= 10) {
          joelImg.classList.add('show');
          setTimeout(() => joelImg.classList.remove('show'), 3000);
          clicks = 0;
        }
      });
    })();

    /* Footer Jahr */
    $('#year').textContent = new Date().getFullYear();
  </script>
</body>
</html>

